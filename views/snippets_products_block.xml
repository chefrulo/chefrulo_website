<?xml version="1.0" encoding="UTF-8"?>
<odoo>

    <!-- Dynamic Products by Category (loads product.template, not variants) -->
    <template id="s_dynamic_products_templates" name="Products by Category (Grouped)">
        <section class="s_dynamic_products_templates pt32 pb32"
                 data-category-name="Frozen"
                 data-limit="8">
            <div class="container">
                <div class="products-container">
                    <!-- Products will be loaded dynamically via JavaScript -->
                    <div class="text-center py-5">
                        <i class="fa fa-spinner fa-spin fa-2x text-muted"></i>
                    </div>
                </div>
            </div>
        </section>
    </template>

    <!-- Register as Website Builder Snippet -->
    <template id="s_dynamic_products_templates_snippet"
              inherit_id="website.snippets"
              name="Products by Category Snippet">
        <xpath expr="//div[@id='snippet_structure']/div[@class='o_panel_body']" position="inside">
            <t t-snippet="chefrulo_website.s_dynamic_products_templates"
               t-thumbnail="/chefrulo_website/static/src/img/snippets/s_products_block.svg"/>
        </xpath>
    </template>

    <!-- Snippet Options for customizing category and limit -->
    <template id="s_dynamic_products_templates_options" inherit_id="website.snippet_options">
        <xpath expr="." position="inside">
            <div data-selector=".s_dynamic_products_templates">
                <we-input string="Category Name"
                          data-attribute-name="categoryName"
                          data-set-attribute-on="section"
                          data-attribute="data-category-name"/>
                <we-input string="Max Products"
                          data-attribute-name="limit"
                          data-set-attribute-on="section"
                          data-attribute="data-limit"/>
            </div>
        </xpath>
    </template>

</odoo>
